include:
  - project: 'proxiad-academie/ops-monitoring'
    ref: experiment
    file: 'ci-templates/templates/core/.gitlab-ci-kubernetes.yml'
  - project: 'proxiad-academie/ops-monitoring'
    ref: experiment
    file: 'ci-templates/templates/platforms/minikube-dev.yml'
  - project: 'proxiad-academie/ops-monitoring'
    ref: experiment
    file: 'ci-templates/templates/shared/variables/dev.yml'
  - project: 'proxiad-academie/ops-monitoring'
    ref: experiment
    file: 'ci-templates/templates/shared/variables/computed.yml'

#Hide the original job so it doesn't run
#update gitlab-personal-token variable in project settings 
deploy:dev:
  rules:
    - when: never

# Just extend and override rules
deploy:angular:dev:
  extends: deploy:dev
  variables:
    APP_NAME: "monitoring-frontend"  # Only override what's different
  rules:
    - if: '$CI_COMMIT_BRANCH == "develop"'